<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>admin</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    </head>
    <body>
        <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>
        <script>
            CMS.registerPreviewStyle('/css/styles.css');
            var BodyPreview = createClass({
                render: function() {
                    var entry = this.props.entry;
                    return h('main', {}, this.props.widgetFor('body'));
                }
            });
            CMS.registerPreviewTemplate('custompages', BodyPreview);
            CMS.registerPreviewTemplate('home', BodyPreview);
            CMS.registerPreviewTemplate('contact', BodyPreview);
            CMS.registerPreviewTemplate('404', BodyPreview);
            CMS.registerEditorComponent({
                id: "youtube",
                label: "Youtube",
                fields: [{name: 'id', label: 'Youtube Video ID', widget: 'string'}],
                pattern: /^youtube (\S+)$/,
                fromBlock: function(match) {
                    return {
                        id: match[1]
                    };
                },
                toBlock: function(obj) {
                    return 'youtube ' + obj.id;
                },
                toPreview: function(obj) {
                    return (
                        '<img src="http://img.youtube.com/vi/' + obj.id + '/maxresdefault.jpg" alt="Youtube Video"/>'
                    );
                }
            });
        </script>
    </body>
</html>
